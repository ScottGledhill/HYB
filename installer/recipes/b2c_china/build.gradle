def config = {
		localProperties {
				property 'commerceservices.default.desktop.ui.experience', 'responsive'
				property 'uiexperience.level.supported', 'DESKTOP'
				property 'csrf.allowed.url.patterns','/[^/]+(/[^?]*)+(sop/response)$,/[^/]+(/[^?]*)+(merchant_callback)$,/[^/]+(/[^?]*)+(hop/response)$,/[^/]+(/[^?]*)+(language)$,/[^/]+(/[^?]*)+(currency)$,/[^/]+(/[^?]*)+(alipay)+/(.)*$,/[^/]+(/[^?]*)+(wechat)+/(.)*$'
		}

		extensions {
			extName 'mcc'
			extName 'backoffice'
			extName 'commercesearchbackoffice'
			extName 'commerceservicesbackoffice'
			extName 'solrfacetsearchbackoffice'
			extName 'solrserver'

			extName 'yacceleratorcockpits'
			extName 'yacceleratorinitialdata'
			extName 'yacceleratorstorefront'
			extName 'yaddon'
			extName 'ycommercewebservices'
			extName 'yacceleratorfulfilmentprocess'
			extName 'electronicsstore'
			
			extName 'addonsupport'
	
			extName 'liveeditaddon'
			extName 'acceleratorwebservicesaddon'
			
			extName 'customersupportbackoffice'
			extName 'customerticketingaddon'

			extName 'commerceorgsamplesaddon'


			
			extName 'chineseprofileaddon'
			extName 'chineselogisticaddon'
			extName 'chineselogisticbackoffice'
			
			
			extName 'chinesepaymentaddon'
			extName 'chinesetaxinvoiceaddon'
			extName 'chinesetaxinvoicebackoffice'
			extName 'chinesepspalipaymockaddon'
			extName 'chinesepspalipaysbackoffice'
			extName 'chinesestoreaddon'
			extName 'verticalnavigationaddon'
			
			extName 'rulebuilderbackoffice'
			extName 'couponbackoffice'
			extName 'droolsruleengineservices'
			extName 'couponfacades'
			extName 'promotionenginesamplesaddon'

			extName 'chineseaddressaddon'
			extName 'chineseaddressbackoffice'
			
			extName 'chinesepspwechatpaymentaddon'
			extName 'chinesepspwechatpaysbackoffice'
			
			extName 'consignmenttrackingaddon'
			extName 'consignmenttrackingmockaddon'
			extName 'consignmenttrackingbackoffice'
			
			extName 'notificationaddon'
			extName 'customerinterestsaddon'
			extName 'stocknotificationaddon'
			extName 'chineseproductsharingaddon'
		}
}

task setup << {
		apply plugin: 'installer-platform-plugin'
		apply plugin: 'installer-addon-plugin'
		def pl = platform(config)
		pl.setup()

		pl.project.addons {
				names "liveeditaddon,chineseprofileaddon,chineselogisticaddon,chinesepaymentaddon,chinesetaxinvoiceaddon,chinesepspalipaymockaddon,commerceorgsamplesaddon,chinesestoreaddon,verticalnavigationaddon,promotionenginesamplesaddon,chineseaddressaddon,chinesepspwechatpaymentaddon,consignmenttrackingaddon,consignmenttrackingmockaddon,notificationaddon,customerinterestsaddon,stocknotificationaddon,chineseproductsharingaddon,customerticketingaddon"
				template "yacceleratorstorefront"
				storeFronts "yacceleratorstorefront"
				platform pl
		}

		pl.project.addons {
				names "acceleratorwebservicesaddon"
				template "ycommercewebservices"
				storeFronts "ycommercewebservices"
				platform pl
		}
}

task initialize << {
		apply plugin: 'installer-platform-plugin'
		def pl = platform(config)
		pl.build()
		pl.initialize()
}


task start << {
		apply plugin: 'installer-platform-plugin'
		def pl = platform(config)
		pl.start()
}
